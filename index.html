<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Chapter 3-DEADLY LIFE</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"/>
  <style>

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #ececeb;
      color: black;
      text-align: center;
      padding: 2em;
    }
    .hidden { display: none; }

#user-display {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 9999;
  display: flex;
  align-items: center;
  background-color: #ececeb;
  padding: 8px 12px;
  border-radius: 8px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  font-family: monospace;
  color: #202e70;
  border: 1px solid #ddd;
  min-width: 180px;
}

#persistent-nav {
  position: fixed;
  top: 110px;
  left: 10px;
  z-index: 9999;
  display: none;
  flex-direction: column;
  gap: 4px; /* 버튼 사이 간격 줄임 */
  background-color: #ececeb;
  padding: 6px 8px; /* 네모 자체 여백 줄임 */
  border-radius: 6px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  border: 1px solid #ddd;
  min-width: 140px; /* 폭도 작게 */
}

#persistent-nav button {
  background-color: #202e70;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 4px 6px;     /* 버튼 내부 여백 줄임 */
  margin: 0;            /* 버튼 외부 여백 제거 */
  cursor: pointer;
  font-family: inherit;
  font-size: 12px;      /* 글자 크기 줄임 */
  transition: background-color 0.2s ease;
}

#persistent-nav button:hover {
  background-color: #0b1029;
}

#barcode-icon {
  width: 60px;
  height: 40px;
  margin-right: 10px;
}

#user-text > div {
  font-size: 14px;
  line-height: 1.4;
  color: #202e70;  /* 혹시 상속이 안 될 수도 있으니 명시 */
}
    #bgm-player {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    #bgm-player button {
      background-color: #202e70 !important;
      color: white;
    }

    .fade-in {
      animation: fadein 1.2s ease-in;
            }
  
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .typewriter {
      font-weight: bold;
      font-size: 1.1em;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #202e70;
      width: 0;
      animation: typing 3s steps(30, end) forwards, blink 0.75s step-end infinite;
      margin-bottom: 1em;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    @keyframes pop {
    0% { transform: scale(0.7); opacity: 0; }
    60% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); }
  }

  #drink-result {
    animation: pop 0.6s ease-out;
    transition: all 0.2s ease;
  }
  
    button {
      font-size: 1em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      background-color: #202e70;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0b1029;
    }
    .nav-button {
      background-color: #444 !important;
      font-size: 0.85em !important;
      padding: 5px 12px !important;
    }
    .logo {
      width: 200px;
      margin-bottom: 1em;
    }
  </style>
</head>

<!-- !!!!여기서부터 BODY!!!! -->
<body>
  <!-- 유저 디스플레이 -->
<div id="user-display">
  <img src="zzapbarcode.png" alt="barcode" id="barcode-icon">
  <div id="user-text">
    <p id="user-class-line">User ID : UNKNOWN</p>
  </div>
</div>
  <!-- 브금 플레이어 -->
  <div id="bgm-player">
    <audio id="bgm" src="zzapbgm.mp3" loop></audio>
    <button onclick="document.getElementById('bgm').play()">▶</button>
    <button onclick="document.getElementById('bgm').pause()">⏸</button>
  </div>
  
  <!-- 로고 -->
  <img class="logo" src="zzaplogo.png"/>
  
  <!-- 내비게이션 -->
  <div id="persistent-nav">
  <button onclick="goTo('main-page-2nd')">메인 화면</button>
  <button onclick="goTo('guide')">조사 가이드</button>
  <button onclick="goTo('starting-point')">건물 입구로</button>
</div>
  
<!-- main-page 버튼 이미지 배치 -->
<div id="main-page" class="hidden" style="position: relative; height: 100vh; background-color: #ececeb;">
  <!-- Initiation -->
  <img src="initiation.png" class="menu-button initiation" loading="lazy" onclick="goTo('starting-point')" alt="시작">
  <!-- Guide -->
  <img src="guide.png" class="menu-button guide" loading="lazy" onclick="goTo('guide')" alt="가이드">
  <!-- Report -->
  <img src="report.png" class="menu-button report" loading="lazy" onclick="goTo('report')" alt="종료">
</div>
<style>
  .menu-button {
    position: absolute;
    cursor: pointer;
    transform-style: preserve-3d;
    transform: translateX(0) scale(1); /* 애니메이션 최종 위치 */
    transition: transform 0.4s ease;
    opacity: 0;
    pointer-events: none; /* 애니메이션 끝날 때까지 hover 방지 */
  }
  /* Initiation 버튼 */
  .initiation {
    top: 1%;
    left: 39%;
    width: 12%;
    height: auto;
    animation-name: slideInLeft;
    animation-duration: 1.2s;
    animation-delay: 0.2s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }
  /* Guide 버튼 */
  .guide {
    top: 17%;
    right: 40%;
    width: 14%;
    height: auto;
    animation-name: slideInRight;
    animation-duration: 1.2s;
    animation-delay: 0.3s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }

  /* Report 버튼 */
  .report {
    top: 36%;
    left: 39%;
    width: 15%;
    height: auto;
    animation-name: slideInLeft;
    animation-duration: 1.2s;
    animation-delay: 0.4s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }

  /* 등장 애니메이션 정의 */
  @keyframes slideInLeft {
    0% {
      transform: translateX(-80%) scale(0.9);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }

  @keyframes slideInRight {
    0% {
      transform: translateX(80%) scale(0.9);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }
/* 공통 Hover 발광 효과 */
.initiation:hover,
.guide:hover,
.report:hover {
  filter: drop-shadow(0 0 8px rgba(32, 46, 112, 0.6)); /* #202e70 계열 빛 */
  transition: filter 0.4s ease-in-out;
}

</style>

<!-- !!!!여기서부터 작동시킬 페이지들!!!! -->
  <!-- 로그인 화면 -->
  <div id="login-page">
    <p>ID를 입력하세요.</p>
    <input id="id-input" type="text" />
    <button onclick="checkLogin()">확인</button>
    <p id="login-error" style="color: #ff4444;"></p>
  </div>

    <!-- guide 페이지 -->
<div id="guide" class="hidden" style="padding: 3em; text-align: left; text-align: left; max-width: 700px; margin: 0 auto; background: white; border: 3px solid #202e70; border-radius: 10px; color: black;">
  <p><span style="font-weight: bold; color: #202e70;">조사 가이드</span><br><br><br>
    웹에서는 클릭, 모바일에서는 터치로 진행합니다. 자유롭게 종료하고 재실행하셔도 좋지만, 창을 닫거나 뒤로가기/새로고침할 시 진행 경과가 초기화되니 주의해 주세요.<br>
    본 조사는 별도의 서버를 사용하지 않기 때문에 세션을 종료하면 결과가 저장되지 않습니다.<br><br>
    메인 화면에서 '조사 종료→조사 마치기' 를 클릭하면 획득한 증거를 정리해 주는 화면이 표시됩니다. 최종 화면을 표시한 후에는 이전으로 돌아갈 수 없습니다.<br>
    최종 화면은 별도의 제출을 필요로 하지 않습니다. 스크린샷 등을 통해 각자 보관해 주세요.</p>
    <br>
    <button class="nav-button" onclick="goBack()">나가기</button>
</div>

  <!-- 레포트 주의사항 -->
  <div id="report" class="hidden">
    <p>모든 조사를 마치고 최종 리포트를 작성하여 획득한 증거를 정리합니다. 진행할 시 이전 단계로 되돌아갈 수 없습니다.<br>조사를 마칠까요?</p>
    <button onclick="loadFinalReport()">조사를 마친다</button><br>
    <button class="nav-button" onclick="goBack()">취소</button>
  </div>
  
  <!-- 뒤로가기 적용된 메인 페이지 -->
<div id="main-page-2nd" class="hidden" style="position: relative; height: 100vh; background-color: #ececeb;">
  <!-- Initiation -->
  <img src="initiation.png" class="menu-button initiation" onclick="goBack()" alt="시작">
  <!-- Guide -->
  <img src="guide.png" class="menu-button guide" onclick="goTo('guide')" alt="가이드">
  <!-- Report -->
  <img src="report.png" class="menu-button report" onclick="goTo('report')" alt="종료">
  </div>
  
  <!-- 스타팅 포인트 -->  
  <div id="starting-point" class="hidden">
    <p><span style="font-weight: bold;">[건물 입구]</span><br><br>흰 관을 연상시키는 건물. 그 입구에 다다른다.<br>돌로 된 정문 표면에는 알 수 없는 문자가 빼곡히 음각으로 새겨져 있다. 무엇을 기록한 것인지는 알 수 없으나, 음산하고 기분 나쁜 분위기가 풍긴다.<br>이번 사건은 실내에서 벌어졌으니 바깥으로 나갈 필요까지는 없겠지...</p>
    <button onclick="goTo('inside')">건물 안으로 들어간다</button>
  </div>

  <!-- 내부 1층 --> 
  <div id="inside" class="hidden">
    <p><span style="font-weight: bold;">[건물 1층]</span><br><br>건물 1층.<br>정면에 방문객을 맞이하는 <span style="color: #202e70;">로비</span>가 보이고, 로비 뒤편에는 유리로 된 <span style="color: #202e70;">엘리베이터</span>가 배치되어 있다.</p>
    <button onclick="goTo('lobby')">로비</button>
    <button onclick="goTo('elevator')">엘리베이터</button><br>
    <button class="nav-button" onclick="goTo('starting-point')">건물 입구로 돌아가기</button>
  </div>

    <!-- 로비 --> 
    <div id="lobby" class="hidden">
    <p><span style="font-weight: bold;">[로비]</span><br><br>건물에 들어오면 가장 먼저 보게 되는 곳.<br>무채색의 석조 <span style="color: #202e70;">카운터</span>를 중심으로 내빈을 위한 <span style="color: #202e70;">라운지</span>가 마련되어 있다.</p>
    <button onclick="goTo('counter')">카운터</button>
    <button onclick="goTo('waitingspace')">라운지</button><br>
    <button class="nav-button" onclick="goTo('inside')">나가기</button>
  </div>

    <!-- 로비:카운터 --> 
    <div id="counter" class="hidden">
    <p><span style="font-weight: bold;">[로비]<br>[카운터]</span><br><br>보통이라면 직원이 서 있어야 할 카운터 너머에는 아무도 없다.<br>조명이 몇 개 꺼져 어둑하고, 공증인의 목소리조차 들리지 않는다.<br>이번 사건을 조사하고 나면, 또 이 아래에 있는 재판정으로...</p>
    <button class="nav-button" onclick="goTo('lobby')">나가기</button>
  </div>

    <!-- 로비:라운지 --> 
    <div id="waitingspace" class="hidden">
    <p><span style="font-weight: bold;">[로비]<br>[라운지]</span><br><br>카운터 앞쪽에 배치된 라운지. 잠시 쉬어가는 용도의 소파가 배치되어 있지만 지금은 적당한 때가 아니다.<br>라운지 중앙에는 작은 <span style="color: #202e70;">책꽂이</span>가 설치되어 있다.</p>
    <button onclick="goTo('bookshelf')">책꽂이</button><br>
    <button class="nav-button" onclick="goTo('lobby')">나가기</button>
  </div>
  
    <!-- 로비:라운지:책꽂이 --> 
    <div id="bookshelf" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[라운지]<br>[책꽂이]</span><br><br>
    책의 종류는 전에 본 미래기관이나 초세계급에 대한 책자가 대부분이다.<br>또, 로렘의 유언을 기록한 얇은 책 하나도 함께 꽂혀 있다.</p>
    <button onclick="goToWithSound('book2','zzapbook.mp3')">《궁금해요! 초세계급 A to Z》</button><br>
    <button onclick="goToWithSound('book1','zzapbook.mp3')">《초세계급 기록자 로렘의 유언》</button><br>
    <button class="nav-button" onclick="goTo('waitingspace')">나가기</button>
  </div>

    <!-- 로비:라운지:책1 --> 
    <div id="book1" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[라운지]<br>[책꽂이]</span><br><br>
    검은 표지의 책.<br><br>
…유언의 집행자는 섬에서 체류하며 하기의 항목을 이행한다.<br><br>1-1. 타 유언 집행자를 대상으로 한 의도적, 계획적 살해 및 증거의 은폐.<br><br>1-2. 전항으로 말미암아 발생한 살해 사건에 대한 조사.<br><br>……</p>
    <button class="nav-button" onclick="goTo('bookshelf')">나가기</button>
  </div>

      <!-- 로비:라운지:책2 --> 
    <div id="book2" class="hidden">
    <p><span style="font-weight: bold;">[로비]/[라운지]<br>[책꽂이]</span><br><br>
    푸른색 표지의 책. 새로 인쇄했는지 종이가 빳빳하다.<br><br>초세계급으로 선발된 인원들에 대한 소개 중에서 폴라리스의 이야기도 찾을 수 있다.<br><br>
    1994년 출생.<br>2015년 밴드 '딥 블루' 결성.<br>2017년 첫 싱글 'BLUE STAR' 발매.<br>2019년 첫 투어 콘서트 개최.<br>2022년 초세계급 프론트맨으로 임명.<br><span style="font-weight: bold;">2025년 사망.</span>
</p>
    <button class="nav-button" onclick="goTo('bookshelf')">나가기</button>
 </div>


  
      <!-- 로비:엘리베이터:탑승 --> 
    <div id="elevator" class="hidden">
    <p><span style="font-weight: bold;">[엘리베이터]</span><br><br>1층부터 4층까지, 원하는 층으로 이동할 수 있다.</p>
    <button onclick="goToWithSound('3rdfloor','zzapelevator.mp3')">3층</button><br>
      <button onclick="goToWithSound('2ndfloor','zzapelevator.mp3')">2층</button><br>
        <button onclick="goToWithSound('inside','zzapelevator.mp3')">1층</button><br>
 </div>     


    <!-- 2층 --> 
    <div id="2ndfloor" class="hidden">
    <p><span style="font-weight: bold;">[2층]</span><br><br>왼쪽 복도는 <span style="color: #202e70;">내빈용 객실</span>로, 오른쪽 복도는 <span style="color: #202e70;">회의실</span>로 이어진다. 1층으로 돌아갈 때는 엘리베이터를 이용하자.</p>
    <button onclick="goTo('elevator1')">엘리베이터</button><br>
    <button onclick="goTo('suite')">내빈용 객실</button>
    <button onclick="goTo('office')">회의실</button><br>
 </div>     
  
    <!-- 내빈용 객실 --> 
    <div id="suite" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]</span><br><br>초세계급들을 위한 개인실.<br>문 앞에 붙은 명패에는 각자의 이름과 재능이 쓰여 있다.<br>객실이 이어지는 복도 끝에는 '<span style="color: #202e70;">비품실</span>'이라고 표시된 작은 방이 보인다.</p>
    <button onclick="goTo('suite1')">개인실을 조사한다</button>
    <button onclick="goTo('bipum')">비품실</button><br>
    <button class="nav-button" onclick="goTo('2ndfloor')">나가기</button>
  </div>

     <!-- 내빈용 객실 --> 
    <div id="suite1" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[개인실]</span><br><br>누구의 개인실을 조사할까? 정확한 풀네임으로 입력하자.</p>
<input type="text" id="secret-code-input">
<p id="secret-code-result"></p>
<button id="secret-code-button" onclick="checkSecretCode()">확인</button><br>
    <button class="nav-button" onclick="goTo('suite')">나가기</button>
 </div>

  
    <!-- 폴라리스 방 --> 
    <div id="polaris" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[폴라리스의 개인실]</span>
    <br><br>모두에게 제공되는 것과 크게 다르지 않은 폴라리스의 방.<br>방을 둘러봐도 특별히 눈에 띄는 것은 없지만, 살펴봐서 나쁠 것은 없겠지...<br>정돈된 <span style="color: #202e70;">침대</span>가 보이고, 방 구석에는 <span style="color: #202e70;">기타 케이스</span>가 놓여 있다.</p>
    <button onclick="goTo('bed')">침대</button><br>
    <button onclick="goTo('guitarcase')">기타 케이스</button><br>
    <button class="nav-button" onclick="goTo('suite')">나가기</button>
  </div>

      <!-- 폴라리스 방 --> 
    <div id="bed" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[폴라리스의 개인실]</span>
    <br><br>푹신한 침대에 베개와 이불이 단정하게 정리되어 있다.</p>
    <button onclick="goTo('evi10')">살펴본다</button><br>
    <button class="nav-button" onclick="goTo('polaris')">나가기</button>
  </div>

      <!-- 폴라리스 방 --> 
    <div id="evi10" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[폴라리스의 개인실]</span>
    <br><br>베개 밑에 메모지와 펜이 숨겨져 있다. 메모지는 한 장 뜯어 쓴 것 같다.</p>
    <button class="nav-button" onclick="goTo('bed')">나가기</button>
  </div>

      <!-- 폴라리스 방 --> 
    <div id="guitarcase" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[폴라리스의 개인실]</span>
    <br><br>폴라리스의 베이스 기타가 들어 있던 케이스. 비어 있다.</p>
    <button id="guitbtn" onclick="ev11('guitbtn')">자세히 살펴본다</button><br>
    <p id="evi11-result"></p>
    <button class="nav-button" onclick="goTo('polaris')">나가기</button>
  </div>

        <!-- 폴라리스 방 --> 
    <div id="evi11" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[폴라리스의 개인실]</span>
    <br><br>그러고 보니 안에 들어 있던 기타는 어디로 간 걸까... 적어도 현장 주변에서 발견되지는 않았다.</p>
    <button class="nav-button" onclick="goTo('guitarcase')">나가기</button>
  </div>
  
    <!-- 비품실 --> 
    <div id="bipum" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[비품실]</span><br><br>생활에 필요한 각종 비품을 구비해 두는 곳.<br>휴지나 종이컵 같은 일회용품부터 각종 청소용구까지, 없는 게 없다.<br>비품실 한가운데에 커다란 <span style="color: #202e70;">도구함</span>이 뚜껑이 닫힌 채로 놓여 있다.</p>
    <button onclick="goTo('ehrngka')">도구함을 연다</button><br>
    <button class="nav-button" onclick="goTo('suite')">나가기</button>
  </div>
  
      <!-- 비품실 : 도구함 --> 
    <div id="ehrngka" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]/[비품실]</span><br><br>도구함의 뚜껑을 들어올리면, 그 안에는 톱, 전동 가위, 도끼 같은 물건들이 가지런히 들어 있다.<br><br>무언가 사라진 것 같지는 않다. 아무도 건드리지 않은 모양이다. 그렇다면 흉기는 어디서 가져온 걸까...</p>
    <button class="nav-button" onclick="goTo('bipum')">나가기</button>
  </div>
  
    <!-- 회의실 --> 
    <div id="office" class="hidden">
    <p><span style="font-weight: bold;">[회의실]</span><br><br>세미나 등을 진행할 수 있는 회의실. 사무실의 역할도 겸하고 있다. 사무용 책상과 그 위의 <span style="color: #202e70;">컴퓨터</span>가 눈에 띈다.</p>
    <button onclick="goTo('pcdesk')">사무용 책상</button><br>
    <button class="nav-button" onclick="goTo('2ndfloor')">나가기</button>
  </div>

    <!-- 회의실 : 사무용 책상 --> 
    <div id="pcdesk" class="hidden">
    <p><span style="font-weight: bold;">[회의실]/[사무용 책상]</span><br><br>책상 위에는 고급스러운 펜과 메모장이 놓여 있다.<br>책상 아래에는 서랍이 달려 있다.</p>
    <button onclick="goTo('pcdesk1')">서랍을 연다</button><br>
    <button class="nav-button" onclick="goTo('office')">나가기</button>
  </div>
  
      <!-- 회의실 : 사무용 책상 : 서랍--> 
    <div id="pcdesk1" class="hidden">
    <p><span style="font-weight: bold;">[회의실]/[사무용 책상]</span><br><br>서랍 안에는 각종 비품과 더불어 구급상자가 하나 놓여 있다.<br>열어 보면 웬만한 응급처치는 가능할 정도로 다양한 용품이 들어 있다.<br>그러나 손댄 흔적도, 사라진 약품도 없다. 이 물건들이 쓸모를 다할 기회는 찾아오지 않았다.</p>
    <button class="nav-button" onclick="goTo('office')">나가기</button>
  </div>

  
    <!-- 3층 --> 
    <div id="3rdfloor" class="hidden">
    <p><span style="font-weight: bold;">[3층]</span><br><br>3층은 방 여러 개로 구성된 문화 시설이다.<br>반짝반짝한 문패가 붙은 문들이 늘어서 있지만 더는 마음이 들뜨지 않는다.<br>창문 너머로는 섬의 모습이 내려다보인다.<br>저 멀리 메모리얼 파크에 묘비 세 개가 늘어서 있다... 곧 하나가 더해지겠지.</p>
    <button onclick="goTo('elevator')">엘리베이터</button><br>
    <button onclick="goTo('music')">음악실</button>
    <button onclick="goTo('cinema')">영화관</button>
    <button onclick="goTo('art')">미술실</button><br>
    <button onclick="goTo('stage')">공연장</button>
    <button onclick="goTo('library')">도서관</button>
    <button onclick="goTo('lab')">자유연구실</button>
 </div>     

    <!-- 음악실 --> 
    <div id="music" class="hidden">
    <p><span style="font-weight: bold;">[음악실]</span><br><br>다양한 악기와 음반을 모아 둔 음악실. 녹음실과 <span style="color: #3f40d3;">CD 감상 부스</span>가 설치되어 있다.<br>또, <span style="color: #3f40d3;">악기 보관실</span>이라고 쓰인 작은 문이 구석에 배치된 것이 보인다.</p>
    <button onclick="goTo('cd')">CD 감상 부스</button>
    <button onclick="goTo('inst')">악기 보관실</button><br>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
  </div>

      <!-- CD부스 --> 
    <div id="cd" class="hidden">
    <p><span style="font-weight: bold;">[음악실]/[CD 감상 부스]</span><br><br>벽 한켠에 CD를 모아 놓은 <span style="color: #3f40d3;">장식장</span>이 보인다.</p>
    <button onclick="goTo('cdlist')">장식장</button><br>
    <button class="nav-button" onclick="goTo('music')">나가기</button>
  </div>

    <!-- CD부스 --> 
    <div id="cdlist" class="hidden">
    <p><span style="font-weight: bold;">[음악실]/[CD 감상 부스]</span><br><br>밴드 '딥 블루'의 CD가 쓰러져 있다. 우연이겠지…</p>
    <button class="nav-button" onclick="goTo('cd')">나가기</button>
  </div>

      <!-- 악기 보관실 --> 
    <div id="inst" class="hidden">
    <p><span style="font-weight: bold;">[음악실]/[악기 보관실]</span><br><br>다양한 악기가 보관된 곳.<br>악기의 보관에 최적화된 습도와 온도를 유지하고 있다. 불이 꺼진 탓에 어둑하다.<br>폴라리스가 평소에 사용하던 베이스 기타는 보이지 않는다.</p>
    <button class="nav-button" onclick="goTo('music')">나가기</button>
  </div>

      <!-- 영화관 --> 
    <div id="cinema" class="hidden">
    <p><span style="font-weight: bold;">[영화관]</span><br><br>텅 빈 영화관. 새까만 스크린이 다가오는 사람을 삼켜 버릴 것 같은 기분 나쁜 분위기를 풍긴다.</p> 
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   
  
      <!-- 미술실 --> 
    <div id="art" class="hidden">
    <p><span style="font-weight: bold;">[미술실]</span><br><br>텅 빈 미술실. 눈에 띄는 것은 없다.</p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

      <!-- 공연장 --> 
    <div id="stage" class="hidden">
    <p><span style="font-weight: bold;">[공연장]</span><br><br>원형 극장의 형태를 빌려온 공연장.<br>중앙의 <span style="color: #3f40d3;">무대</span> 말고도 조명 관리실, 분장실과 촬영 부스가 있지만, 공연할 사람이 없다면 무용지물이다.</p>
    <button onclick="goTo('mudae')">무대</button><br>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
  </div>

      <!-- 공연장 --> 
    <div id="mudae" class="hidden">
    <p><span style="font-weight: bold;">[공연장]/[무대]</span><br><br>조명이 전부 꺼져 있어 어두컴컴한 무대. 안쪽으로 시체의 모습이 보인다.</p>
    <button onclick="goTo('polasiche')">폴라리스 래피드의 시체를 확인한다</button><br>
    <button onclick="goTo('around')">시체의 주변을 확인한다</button><br>
    <button class="nav-button" onclick="goTo('stage')">나가기</button>
  </div>
  
      <!-- !!폴라리스 시체 --> 
    <div id="polasiche" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    가슴팍에 무언가가 꽂힌 폴라리스 래피드의 시체.<br>스피커에 기댄 상태로 앉아 있다.</p>
    <button onclick="goTo('evi1')">전체적인 상태</button><br>
    <button onclick="goTo('evi3')">얼굴을 살펴본다</button><br>
    <button onclick="goTo('evi4')">상체를 살펴본다</button><br>
    <button onclick="goTo('cut')">상처 부근을 살펴본다</button><br>
    <button onclick="goTo('foot')">하체를 살펴본다</button><br>
    <button class="nav-button" onclick="goTo('mudae')">나가기</button>
  </div>

      <!-- !!폴라리스 시체 --> 
    <div id="evi1" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    늘 감고 다니는 붕대나 밴드가 붙어 있지만, 새로운 상처는 보이지 않는다.</p>
   <button id="e1" onclick="ev2('e1')">자세히 본다</button><br>
   <button class="nav-button" onclick="goTo('polasiche')">나가기</button>
    <p id="evi2-result"></p>
  </div>

      <!-- !!폴라리스 시체 --> 
    <div id="evi2" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    꼼꼼히 살펴본 결과 가슴과 머리의 상처를 제외한 다른 상처는 전혀 없는 것 같다.</p>
   <button class="nav-button" onclick="goTo('polasiche')">나가기</button>
  </div>

        <!-- !!폴라리스 시체 --> 
    <div id="evi3" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    이마 위쪽에서도 피가 흐른 흔적이 있다. 머리도 공격당한 걸까?</p>
   <button class="nav-button" onclick="goTo('polasiche')">나가기</button>
  </div>
  
         <!-- !!폴라리스 시체 --> 
    <div id="evi4" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    머리카락 끝과 어깨 부근에도 혈흔이 묻어 있다.<br>공격당할 때 피가 튀었거나... 지혈하다가 묻은 걸까?</p>
   <button class="nav-button" onclick="goTo('polasiche')">나가기</button>
  </div>

       <!-- !!폴라리스 시체 --> 
    <div id="cut" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    가슴팍에 있는 상처. 깊은 상처에서 흐른 핏자국이 선명하다.</p>
   <button id="tkdcj" onclick="ev5('tkdcj')">심장 부근을 살핀다</button><br>
  <button id="thswkrnr" onclick="ev6('thswkrnr')">남아 있는 흔적이 없는지 살핀다</button><br>
    <p id="evi5-result"></p>
    <p id="evi6-result"></p>
   <button class="nav-button" onclick="goTo('polasiche')">나가기</button>
  </div>

    <!-- !!폴라리스 시체 --> 
    <div id="evi5" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    심장 부근에 렌치가 꽂혀 있다.<br>한쪽은 드라이버, 한쪽은 육각형 모양으로 된 형태로 지금은 드라이버 쪽이 튀어나와 있다.</p>
   <button class="nav-button" onclick="goTo('cut')">나가기</button>
  </div>

    <!-- !!폴라리스 시체 --> 
    <div id="evi6" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    시체에 꽂힌 것은 렌치로, 손자국이 남아 있다.<br>크기를 보면 폴라리스 본인의 것으로 보이고, 다른 자국은 보이지 않는다.</p>
   <button class="nav-button" onclick="goTo('cut')">나가기</button>
  </div>

      <!-- !!폴라리스 시체 --> 
    <div id="foot" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[폴라리스의 시체]</span><br><br>
    신발 한쪽이 벗겨져 있다.</p>
   <button class="nav-button" onclick="goTo('polasiche')">나가기</button>
  </div>

        <!-- !!시체 주변 --> 
    <div id="around" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
    폴라리스는 <span style="color: #3f40d3;">스피커</span>에 기댄 상태로 앉아 있고, 주변에 <span style="color: #3f40d3;">수건</span> 하나가 떨어져 있다.<br><span style="color: #3f40d3;">바닥</span>에도 무언가 떨어져 있는 듯하다.</p>
       <button onclick="goTo('speaker')">스피커</button>
    <button onclick="goTo('towel')">수건</button>
    <button onclick="goTo('qkekr')">바닥</button><br>
       <button class="nav-button" onclick="goTo('mudae')">나가기</button>   
  </div>

        <!-- !!주변 --> 
    <div id="speaker" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
    폴라리스가 기대고 있던 스피커. 피가 약간 튀어 있는 것 외에 이상은 없다.</p>
   <button id="mvspk" onclick="ev7('mvspk')">스피커를 움직여 본다</button><br>
    <p id="evi7-result"></p>
   <button class="nav-button" onclick="goTo('around')">나가기</button>
  </div>
  
    <div id="evi7" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
  스피커를 살짝 옮기자 가려져 있던 벽이나 바닥에 긁히고 패인 자국이 남아 있는 게 보인다. 새로 생긴 흔적 같다.</p>
   <button class="nav-button" onclick="goTo('around')">나가기</button>
  </div>
  
        <!-- !!주변 --> 
    <div id="towel" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
    피 묻은 수건이 바닥에 떨어져 있다. 지혈하려던 걸까?</p>
   <button class="nav-button" onclick="goTo('around')">나가기</button>
  </div>

    <!-- !!주변 --> 
    <div id="qkekr" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
    바이알 약병 하나가 굴러다닌다.</p>
     <button id="antmsdir" onclick="ev8('antmsdir')">무슨 약인지 확인한다</button><br>
  <button id="dirqud" onclick="ev9('dirqud')">약병을 자세히 본다</button><br>
    <p id="evi8-result"></p>
    <p id="evi9-result"></p>
   <button class="nav-button" onclick="goTo('around')">나가기</button>
  </div>

      <div id="evi8" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
  [약품명: NX-021] 시판 제품이 아니다.</p>
   <button class="nav-button" onclick="goTo('qkekr')">나가기</button>
  </div>

      <div id="evi9" class="hidden">
    <p><span style="font-weight: bold;">[공연장]<br>[시체 주변]</span><br><br>
  약병의 고무마개에는 주삿바늘 자국이 없다.</p>
   <button class="nav-button" onclick="goTo('qkekr')">나가기</button>
  </div>

      <!-- 도서관 --> 
    <div id="library" class="hidden">
    <p><span style="font-weight: bold;">[도서관]</span><br><br>장서의 종류별로 정리된 책장이 아무도 없는 숲처럼 펼쳐진다.<br>어디로 가야 할지 길을 잃어버릴 것만 같다.</p>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

          <!-- 자유연구실 --> 
    <div id="lab" class="hidden">
    <p><span style="font-weight: bold;">[자유연구실]</span><br><br>학자와 연구자들을 위한 자유연구실.<br><span style="color: #3f40d3;">약품 보관실</span>로 향하는 문이 열려 있다.</p>
    <button onclick="goTo('medicine')">약품 보관실</button><br>
    <button class="nav-button" onclick="goTo('3rdfloor')">나가기</button>
    </div>   

   <!-- 약품보관실 --> 
    <div id="medicine" class="hidden">
    <p><span style="font-weight: bold;">[자유연구실]/[약품 보관실]</span><br><br>어려운 이름의 약품들이 <span style="color: #3f40d3;">선반</span>에 잔뜩 늘어서 있는 약품 보관실이다.<br>연구실 구석에 <span style="color: #3f40d3;">쓰레기통</span>이 놓여 있다.</p>
    <button onclick="goTo('sunban')">선반을 확인한다</button><br>   
    <button onclick="goTo('evi3')">쓰레기통을 연다</button><br>
    <button class="nav-button" onclick="goTo('lab')">나가기</button>
    </div>   
  
       <!-- 선반 --> 
    <div id="sunban" class="hidden">
    <p><span style="font-weight: bold;">[자유연구실]/[약품 보관실]</span><br><br>선반이 조금 비어 있는 것 같은데... <br> 무엇이 사라진 거지?</p>
    <button class="nav-button" onclick="goTo('medicine')">나가기</button>
    </div>   

     <!-- 쓰레기통 --> 
    <div id="evi3" class="hidden">
    <p><span style="font-weight: bold;">[자유연구실]/[약품 보관실]</span><br><br>빈 약병이 버려져 있다.<br>약품 정보를 보니 안에 들어 있던 약은 '졸피뎀' 인 것 같다.</p>
    <button class="nav-button" onclick="goTo('medicine')">나가기</button>
    </div>   
      
<!-- !!!!여기서부터 스크립트!!!! -->
  <script>
  // 애니메이션이 끝난 뒤 hover 작동 허용
  document.querySelectorAll('.menu-button').forEach(button => {
    button.addEventListener('animationend', () => {
      button.style.pointerEvents = 'auto';
    });
  });
//★★★★★[중요]유저 데이터★★★★★
    const userData = {
      mung0515: {
        class: "피자마스터 으믕",
        id: "ThePizzaMaster",
        STR: 6,
        INT: 6,
        OBS: 6,
        POW: 6,
        LUC: 6,
        key: 0,
        coin: 0
      },
      sese0409: {
        class: "감자마스터 세세",
        id: "Linguistics",
        STR: 1,
        INT: 1,
        OBS: 1,
        POW: 1,
        LUC: 1,
        key: 0,
        coin: 0
      },
        erne0409: {
        class: "재해과학자 에르네스토 프로켈",
        id: "NoClassToday",
        STR: 3,
        INT: 3,
        OBS: 3,
        POW: 3,
        LUC: 3,
        key: 0,
        coin: 0
      },
        liva3561: {
        class: "??? ?",
        id: "Untitled",
        STR: 3,
        INT: 3,
        OBS: 3,
        POW: 3,
        LUC: 3,
        key: 0,
        coin: 0}
      ,
              taei0515: {
        class: "퇴마사 태이",
        id: "Taei",
        STR: 5,
        INT: 1,
        OBS: 1,
        POW: 3,
        LUC: 5,
        key: 0,
        coin: 0}
      ,
        pola2469: {
        class: "프론트맨 폴라리스 래피드",
        id: "polaris",
        STR: 5,
        INT: 4,
        OBS: 4,
        POW: 1,
        LUC: 5,
        key: 0,
        coin: 0}
      ,
        siny1538: {
        class: "약사 요시다 신",
        id: "SIN",
        STR: 2,
        INT: 5,
        OBS: 3,
        POW: 4,
        LUC: 2,
        key: 0,
        coin: 0}
      ,
        edit9947: {
        class: "과학수사관 에디트 발랑틴",
        id: "edit",
        STR: 4,
        INT: 4,
        OBS: 4,
        POW: 4,
        LUC: 4,
        key: 0,
        coin: 0}
      ,
        maur3085: {
        class: "소매치기 모리스 레비",
        id: "Levi",
        STR: 3,
        INT: 2,
        OBS: 4,
        POW: 2,
        LUC: 4,
        key: 0,
        coin: 0}
      ,
        jaha4287: {
        class: "스포츠 트레이너 원자한",
        id: "Jahan",
        STR: 4,
        INT: 4,
        OBS: 6,
        POW: 3,
        LUC: 2,
        key: 0,
        coin: 0}
      ,
        wied6391: {
        class: "필체감정사 비더 바이나흐텐",
        id: "WEIHNACHT",
        STR: 1,
        INT: 4,
        OBS: 6,
        POW: 1,
        LUC: 2,
        key: 0,
        coin: 0}
      ,
        isad2597: {
        class: "행정가 이사도르 도슨",
        id: "FT06_dawson",
        STR: 3,
        INT: 4,
        OBS: 5,
        POW: 6,
        LUC: 3,
        key: 0,
        coin: 0}
      ,
        zede0753: {
        class: "생존전문가 제더카이어 어비스",
        id: "AtoZ",
        STR: 5,
        INT: 3,
        OBS: 5,
        POW: 5,
        LUC: 3,
        key: 0,
        coin: 0}
      ,
        akir2740: {
        class: "화가 에이즈카 아키라",
        id: "akila",
        STR: 1,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 4,
        key: 0,
        coin: 0},
              rust8164: {
        class: "우체부 루스티카 테일윈드",
        id: "RUSTIC4",
        STR: 4,
        INT: 1,
        OBS: 4,
        POW: 3,
        LUC: 5,
        key: 0,
        coin: 0},
              seto2566: {
        class: "피아니스트 세토 아이비",
        id: "IVY",
        STR: 3,
        INT: 4,
        OBS: 5,
        POW: 3,
        LUC: 2,
        key: 0,
        coin: 0},
              kuki4917: {
        class: "해커 쿠루미 J. 쿠로키",
        id: "MACHO_KUKI",
        STR: 3,
        INT: 5,
        OBS: 4,
        POW: 3,
        LUC: 1,
        key: 0,
        coin: 0},
              nuri2925: {
        class: "체스마스터 하누리",
        id: "nuriNOW",
        STR: 1,
        INT: 4,
        OBS: 3,
        POW: 5,
        LUC: 4,
        key: 0,
        coin: 0},
              rose1928: {
        class: "수영선수 미아 콜린스",
        id: "RosePinkDolphin",
        STR: 4,
        INT: 2,
        OBS: 5,
        POW: 4,
        LUC: 3,
        key: 0,
        coin: 0},
              ivan2992: {
        class: "수의사 이반 카르포프",
        id: "ivan",
        STR: 4,
        INT: 5,
        OBS: 5,
        POW: 3,
        LUC: 2,
        key: 0,
        coin: 0},
              bury5792: {
        class: "고고학자 베리",
        id: "Berry",
        STR: 5,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 5,
        key: 0,
        coin: 0},
                 fome0838: {
        class: "탐험가 포멜하우트 에빌라",
        id: "Explorer",
        STR: 5,
        INT: 3,
        OBS: 3,
        POW: 5,
        LUC: 2,
        key: 0,
        coin: 0} 
    };

    let currentUser = null;
    let pageHistory = [];
    const outputIds = ['gym-result', 'library-result'];
    
//★★★★★로그인★★★★★
    function checkLogin() {
      const id = document.getElementById('id-input').value;
      if (userData[id]) {
        currentUser = userData[id];
        showWelcomeMessage(currentUser.class);
      } else {
        document.getElementById('login-error').innerText = "아이디가 일치하지 않습니다.";
      }
    }
  
//★★★★★환영 메시지★★★★★
    function showWelcomeMessage(userClass) {
      document.getElementById('login-page').classList.add('hidden');
      const container = document.createElement('div');
      container.classList.add('typewriter');
      container.innerHTML = `초세계급 ${userClass} 님을 환영합니다. . .`;
      document.body.appendChild(container);
      setTimeout(() => {
        container.remove();
        showUserInfo();
        document.getElementById('main-page').classList.remove('hidden');
        pageHistory.push('main-page');
      }, 3600);
    }
//★★★★★유저 인포메이션 창★★★★★
    function showUserInfo() {
      const userBox = document.getElementById('user-display');
      document.getElementById('user-class-line').innerHTML = `User ID: ${currentUser.id}`;
      userBox.classList.remove('hidden');
    }

//★★★★★출력된 텍스트 아웃풋 창 넘어갈 때 지우기 (goTo 연동용)★★★★★
    function clearOutputs() {
  outputIds.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.innerText = '';
  });

  // 모든 *-result 요소도 비우기
  document.querySelectorAll('[id$="-result"]').forEach(el => {
    el.innerText = '';
  });
}


//★★★★★goTo★★★★★
function goTo(page) {
  // 창 이동시 숨겨지지 않는 디스플레이 설정
  const exceptions = ['user-display','persistent-nav','bgm-player','bgm-player button'];  
  document.querySelectorAll('div').forEach(div => {
    const isException = exceptions.includes(div.id) || div.closest('#user-display') || div.closest('#persistent-nav');
    if (!isException) {
      div.classList.add('hidden');
    }
  });
  //지우고 페이드 인
  const target = document.getElementById(page);
  target.classList.remove('hidden');
  target.classList.add('fade-in');
  if (page === 'suite1') {
    const btn = document.getElementById('secret-code-button');
    if (btn) btn.classList.remove('hidden');
  }
  clearOutputs();
  pageHistory.push(page);
  //[중요]특정 페이지 진입 시 증거 획득
    if (['evi1'].includes(page)) {
    currentUser.evid1 = true;
  }
    if (['evi2'].includes(page)) {
    currentUser.evid2 = true;
  }
    if (['evi3'].includes(page)) {
    currentUser.evid3 = true;
  }
    if (['evi4'].includes(page)) {
    currentUser.evid4 = true;
  }
    if (['evi5'].includes(page)) {
    currentUser.evid5 = true;
  }
    if (['evi6'].includes(page)) {
    currentUser.evid6 = true;
  }
    if (['evi7'].includes(page)) {
    currentUser.evid7 = true;
  }
    if (['evi8'].includes(page)) {
    currentUser.evid8 = true;
  }
    if (['evi9'].includes(page)) {
    currentUser.evid9 = true;
  }
    if (['evi10'].includes(page)) {
    currentUser.evid10 = true;
  }
    if (['evi11'].includes(page)) {
    currentUser.evid11 = true;
  }
    if (['evi12'].includes(page)) {
    currentUser.evid12 = true;
  }
    if (['evi13'].includes(page)) {
    currentUser.evid13 = true;
  }
      if (['evi14'].includes(page)) {
    currentUser.evid14 = true;
  }
      if (['evi15'].includes(page)) {
    currentUser.evid15 = true;
  }
    if (['qkekr'].includes(page)) {
    currentUser.med = true;
  }
    if (page === 'starting-point') {
    document.getElementById('persistent-nav').style.display = 'flex';
  }}

//★★★★★goTodel(이동과 동시에 버튼 삭제)★★★★★   
function goTodel(targetPage, buttonId) {
  const btn = document.getElementById(buttonId);
  if (btn) btn.remove(); // 한 번만 지움
  goTo(targetPage); // 기존 페이지 이동 로직 재사용
}

//★★★★★goToWithSound(페이지 이동 버튼 누를 때 효과음(일시) 재생)★★★★★   
  function goToWithSound(page, soundFile) {
      const audio = new Audio(soundFile);
      audio.loop = false;
      audio.volume = 0.3;
      audio.play();
      goTo(page);
    }

//★★★★★goToWithSound(페이지 이동 버튼 누를 때 효과음 계속해서 재생, 루프)★★★★★  
let zzapseaAudio = null;
let zzapportAudio = null;

function goToWithSoundNL(page, soundFile) {
  if (soundFile.includes('zzapsea.mp3')) {
    zzapseaAudio = new Audio(soundFile);
    zzapseaAudio.loop = true;
    zzapseaAudio.play();
  } else if (soundFile.includes('zzapport.mp3')) {
    zzapportAudio = new Audio(soundFile);
    zzapportAudio.loop = true;
    zzapportAudio.play();
  } else {
    const audio = new Audio(soundFile);
    audio.loop = true;
    audio.play();
  }
  goTo(page);
}

//★★★★★해당 버튼을 누를 시, 페이지 이동과 동시에 zzapseaAudio 중지★★★★★
function goToWithoutzzapsea(page) {
  if (zzapseaAudio && !zzapseaAudio.paused) {
    zzapseaAudio.pause();
    zzapseaAudio.currentTime = 0;
  }
  if (zzapportAudio && !zzapportAudio.paused) {
    zzapportAudio.pause();
    zzapportAudio.currentTime = 0;
  }
  goTo(page);
}

//★★★★★goBack★★★★★  
function goBack() {
  if (pageHistory.length > 1) {
    // 현재 페이지 제거
    pageHistory.pop();
    const prevPage = pageHistory[pageHistory.length - 1];

    // 예외 요소들 (루트 + 내부 포함 전부 보호)
    const persistentRoots = ['user-display', 'bgm-player', 'persistent-nav'];

    // 모든 div를 숨기되, 예외 요소 또는 그 자식은 숨기지 않음
    document.querySelectorAll('div').forEach(div => {
      const isPersistent = persistentRoots.some(rootId => {
        const rootEl = document.getElementById(rootId);
        return rootEl && (div === rootEl || rootEl.contains(div));
      });
      if (!isPersistent) {
        div.classList.add('hidden');
      }
    });

    // 이전 페이지 보여주기
    const target = document.getElementById(prevPage);
    if (target) {
      target.classList.remove('hidden');
      target.classList.add('fade-in');
    }

    // 텍스트 강제 갱신 (혹시라도 브라우저 캐시가 날려버린 경우)
    if (currentUser) {
      const idLine = document.getElementById('user-class-line');
      if (idLine) idLine.innerText = `User ID: ${currentUser.id}`;
      if (coinLine) coinLine.innerText = `Coin: ${currentUser.coin || 0}`;
    }

    // 출력 영역 초기화
    clearOutputs();
  }
}




//여기서부터 특정 장소에서 사용하도록 되어 있는 함수!!!!
function ev2(buttonId) {
  if (currentUser.OBS >= 5) {
    goTo('evi2');
  } else {
    const result = document.getElementById('evi2-result');
    result.innerText = "자세히 살펴봤지만 더 떠오르는 것은 없다.";
  }
}

function ev5(buttonId) {
  if (currentUser.POW >= 3) {
    goTo('evi5');
  } else {
    const result = document.getElementById('evi5-result');
    result.innerText = "자세히 보기에는 지나치게 참혹한 모습이다.";
  }
}
function ev6(buttonId) {
  if (currentUser.OBS >= 4) {
    goTo('evi6');
  } else {
    const result = document.getElementById('evi6-result');
    result.innerText = "자세히 살펴봤지만 눈에 띄는 것은 없다.";
  }
}
function ev7(buttonId) {
  if (currentUser.STR >= 3) {
    goTo('evi7');
  } else {
    const result = document.getElementById('evi7-result');
    result.innerText = "스피커는 꽤 무겁다. 마음대로 움직일 수 없을 것 같다.";
  }
}
function ev8(buttonId) {
  if (currentUser.INT >= 5) {
    goTo('evi8');
  } else {
    const result = document.getElementById('evi8-result');
    result.innerText = "무슨 약인지 짐작조차 가지 않는다.";
  }
}
function ev9(buttonId) {
  if (currentUser.OBS >= 5) {
    goTo('evi9');
  } else {
    const result = document.getElementById('evi9-result');
    result.innerText = "자세히 확인했지만 짚이는 것이 없다.";
  }
}

function ev11(buttonId) {
  if (currentUser.INT >= 4) {
    goTo('evi11');
  } else {
    const result = document.getElementById('evi11-result');
    result.innerText = "자세히 들여다보았지만 더 생각나는 것은 없다.";
  }
}
function ev12(buttonId) {
  if (currentUser.med === true) {
    goTo('evi12');
  } else {
    const result = document.getElementById('evi12-result');
    result.innerText = "본 기억이 없는 약이다.";
  }
}
function ev14(buttonId) {
  if (currentUser.LUC >= 4) {
    goTo('evi14');
  } else {
    const result = document.getElementById('evi14-result');
    result.innerText = "워낙 알아보기 힘든 글씨인 탓에 내용을 더 알아내는 것은 힘들 것 같다.";
  }
}
function ev15(buttonId) {
  if (currentUser.id === "edit" || currentUser.id === "WEIHNACHT") {
    goTo('evi15');
  } else {
    const result = document.getElementById('evi15-result');
    result.innerText = "딱히 떠오르는 것은 없다...";
  }
}

    
//★★★★★퀴즈★★★★★
function checkSecretCode() {
  const input = document.getElementById('secret-code-input').value;
  if (input === "폴라리스 래피드") { // 원하는 정답
    const codebox = document.getElementById('codebox');
    goTo('polaris');
  } else {
    const result = document.getElementById('secret-code-result');
    result.innerText = "잠겨 있는 방이다.";
  }
}    

//파이널 리포트 걍 여기다 두려고... 
function loadFinalReport() {
  document.body.innerHTML = '';

  const div = document.createElement('div');
  div.id = 'final-report';
  div.className = 'fade-in';
  div.style = `
    max-width: 700px;
    margin: 100px auto;
    background: white;
    border: 3px solid #202e70;
    border-radius: 10px;
    color: black;
    padding: 2em;
    font-family: 'Noto Sans KR', sans-serif;
    position: relative;
  `;

  const lines = [
    { html: `<em style="color: #202e70;">초세계급 ${currentUser.class} 님이 조사를 완료하였습니다…</em>`, align: 'left', lineStyle: 'color: #202e70; font-style: italic;' },
    { html: `<em style="color: #202e70;">획득한 증거를 정리하는 중…</em>`, align: 'left', lineStyle: 'color: #202e70; font-style: italic;' },
    { html: `<span style="color: black;">User ID : ${currentUser.id} | STR ${currentUser.STR}  INT ${currentUser.INT}  OBS ${currentUser.OBS}  POW ${currentUser.POW}  LUC ${currentUser.LUC}</span>`, align: 'left', lineStyle: 'color: black;' },
  ];


  if (currentUser.evid1 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">잘 정돈된 시체의 상태</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid2 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">시체의 가슴팍과 머리의 상처를 제외하면 다른 상처는 전무함</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid3 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">폴라리스의 이마 위쪽에 피가 흐른 흔적</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid4 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">폴라리스의 머리카락 끝과 어깨 부근에 묻은 혈흔</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid5 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">폴라리스의 심장 부분에 꽂힌 렌치</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
    if (currentUser.evid6 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">렌치에 남은 폴라리스의 손자국</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evidnfl === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">사라진 헌화용 국화</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid7 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">스피커 뒤쪽의 벽에 생긴 흠집</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid8 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">공연장 바닥의 약품 NX-021</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid9 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">공연장 바닥에 있던 약품의 고무마개에는 주삿바늘 흔적이 없음</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid10 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">폴라리스의 방, 메모지를 한 장 뜯어 쓴 흔적</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid11 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">사라진 베이스 기타</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid12 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">약품 보관실의 쓰레기통에 버려진 약병</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
    if (currentUser.evid13 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">라운지 바닥의 쪽지 「…비밀… …공연장… 1시 30분…」 </div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  if (currentUser.evid14 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">라운지 바닥의 쪽지 「…리스 …비」 </div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
    if (currentUser.evid15 === true) {
    lines.push({ html: `<div style="color: black; font-style: italic;">라운지 바닥의 쪽지는 평소에 쓰지 않는 손으로 작성됨</div>`, align: 'right', lineStyle: 'color: black; font-style: italic;' });
  }
  lines.push({ html: `<div style="color: #888">별도의 제출은 필요로 하지 않습니다.</div>`, align: 'right', lineStyle: 'color: #888;' });

  const content = document.createElement('div');
  div.appendChild(content);
  document.body.appendChild(div);

  lines.forEach(({ html, align, lineStyle }) => {
    const container = document.createElement('div');
    container.style = `position: relative; margin-bottom: 1.5em; min-height: 1.5em; text-align: ${align};`;

    const real = document.createElement('div');
    real.className = 'typed-line';
    real.style = `text-align: ${align}; ${lineStyle}`;
    real.innerHTML = html;

    container.appendChild(real);
    content.appendChild(container);
  });
}

const style = document.createElement('style');
style.innerHTML = `
  .typed-line {
    position: relative;
    z-index: 1;
    white-space: pre-wrap;
    animation: slideIn 0.6s ease-out both;
  }
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
`;
document.head.appendChild(style);

  </script>
</body>
</html>
